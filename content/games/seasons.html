<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="./seasons.css" rel="stylesheet" />

    <!-- vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.31/dist/vue.global.prod.js"></script>

    <title>Seasons Helper</title>
  </head>
  <body>
    <div class="container-fluid" id="Seasons">
      <!-- Main section start -->
      <!-- Choose colors start-->
      <table class="table table-borderless" v-if="!gaming">
        <thead>
          <tr class="text-center">
            <th
              :style="{'background-color':color}"
              v-for="color in ['orange','purple','yellow','gray']"
            ></th>
          </tr>
        </thead>
        <tbody>
          <tr class="text-center">
            <td
              class="table-active"
              v-for="color in ['orange','purple','yellow','gray']"
            >
              <!-- form-check-inline 是为了使得 checkbox 可以水平居中 -->
              <div class="form-check form-switch form-check-inline">
                <input
                  class="form-check-input"
                  type="checkbox"
                  role="switch"
                  :id="color"
                  :value="color"
                  v-model="colors"
                />
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- Choose colors end-->
      <!-- Start button start -->
      <div class="row">
        <div class="col-12 text-center">
          <button
            type="button"
            class="btn btn-outline-primary"
            :disabled="colors.length<2"
            @click="start"
            v-if="!gaming"
          >
            Start
          </button>
        </div>
      </div>
      <!-- Start button end -->
      <!-- Game start-->
      <table class="table table-borderless" v-if="gaming">
        <tbody>
          <tr class="text-center" v-for="color in colors">
            <th scope="row" :style="{'background-color':color}"></th>
            <td>
              <div class="btn-group" role="group">
                <!-- Subtract crystals start -->
                <button
                  type="button"
                  class="btn btn-outline-success"
                  @click="computeds[color]-=i"
                  v-for="i in [5,4,3,2,1]"
                >
                  {{i}}
                </button>
                <!-- Subtract crystals end -->
                <button
                  type="button"
                  class="btn"
                  :class="btnComputed(color)"
                  :disabled="computeds[color]==0"
                  @click="compute(color)"
                >
                  {{signComputed(color)}}
                </button>
                <!-- Add crystals start -->
                <button
                  type="button"
                  class="btn btn-outline-danger"
                  @click="computeds[color]+=i"
                  v-for="i in [1,2,3,4,5]"
                >
                  {{i}}
                </button>
                <!-- Add crystals end -->
                <!-- Familiars start-->
                <button
                  type="button"
                  class="btn btn-outline-primary"
                  @click="familiar.method(color)"
                  v-for="familiar in familiars"
                >
                  {{familiar.name}}
                </button>
                <!-- Familiars end-->
              </div>
            </td>
            <th scope="row" :style="{'background-color':color}"></th>
          </tr>
        </tbody>
      </table>
      <!-- Game end-->
      <!-- History start -->
      <table class="table table-borderless" v-if="gaming">
        <thead>
          <tr class="text-center">
            <th
              scope="col"
              :style="{'background-color':color}"
              v-for="color in colors"
            ></th>
          </tr>
          <tr class="text-center">
            <th
              scope="col"
              :style="{'background-color':color}"
              v-for="operate in operations"
            >
              <!-- Operations start-->
              <button
                type="button"
                class="btn btn-outline-primary"
                @click="operate.method(color)"
              >
                {{operate.name}}
              </button>
              <!-- Operations end-->
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            class="text-center"
            :class="{'table-active': era==currentEra}"
            v-for="(history, era) in histories"
          >
            <td v-for="color in colors">{{history[color]}}</td>
          </tr>
        </tbody>
      </table>
      <!-- History end -->
      <!-- Main section end -->
    </div>

    <!-- seasons.js -->
    <script src="./seasons.js"></script>

    <!-- Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
